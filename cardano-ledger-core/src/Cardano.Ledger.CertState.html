<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.CertState</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier">CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier">DState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier">PState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier">VState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier">FutureGenDeleg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier">lookupDepositDState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier">lookupRewardDState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier">rewards</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier">delegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier">ptrsMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier">payPoolDeposit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier">refundPoolDeposit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier">obligationCertState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">where</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Interns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decNoShareCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decSharePlusCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decSharePlusLensCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decodeRecordNamed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decodeRecordNamedT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">encodeListLen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">toMemptyLens</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary.Coders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator">(&lt;!)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier">DeltaCoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Compactible.html"><span class="hs-identifier">Cardano.Ledger.Compactible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier">fromCompact</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.html"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier">Era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier">EraCrypto</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier">EraPParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier">PParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#ppPoolDepositL"><span class="hs-identifier">ppPoolDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier">Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier">StakeCredential</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier">Crypto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Keys.html"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.html#GenDelegPair"><span class="hs-identifier">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.html#GenDelegs"><span class="hs-identifier">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier">KeyHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyRole"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.PoolParams.html"><span class="hs-identifier">Cardano.Ledger.PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier">PoolParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Slot.html"><span class="hs-identifier">Cardano.Ledger.Slot</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="hs-identifier">EpochNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.TreeDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToExpr</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier">RDPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier">UMap</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier">RewDepUView</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#SPoolUView"><span class="hs-identifier">SPoolUView</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UM</span></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">NFData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">KeyValue</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">object</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pairs</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.=)</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">def</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">foldl'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Lens.Micro</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_2</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">NoThunks.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- ======================================</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span id="local-6989586621679401945"><span id="local-6989586621679401946"></span></span><span class="hs-keyword">data</span><span> </span><span id="FutureGenDeleg"><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span></span><span> </span><span id="local-6989586621679403119"><span class="annot"><a href="#local-6989586621679403119"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FutureGenDeleg"><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="fGenDelegSlot"><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; SlotNo
</span><a href="Cardano.Ledger.CertState.html#fGenDelegSlot"><span class="hs-identifier hs-var hs-var">fGenDelegSlot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="fGenDelegGenKeyHash"><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; KeyHash 'Genesis c
</span><a href="Cardano.Ledger.CertState.html#fGenDelegGenKeyHash"><span class="hs-identifier hs-var hs-var">fGenDelegGenKeyHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Genesis"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403119"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401930"><span id="local-6989586621679401932"><span id="local-6989586621679401940"><span class="annot"><span class="annottext">Int -&gt; FutureGenDeleg c -&gt; ShowS
forall c. Int -&gt; FutureGenDeleg c -&gt; ShowS
forall c. [FutureGenDeleg c] -&gt; ShowS
forall c. FutureGenDeleg c -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FutureGenDeleg c] -&gt; ShowS
$cshowList :: forall c. [FutureGenDeleg c] -&gt; ShowS
show :: FutureGenDeleg c -&gt; String
$cshow :: forall c. FutureGenDeleg c -&gt; String
showsPrec :: Int -&gt; FutureGenDeleg c -&gt; ShowS
$cshowsPrec :: forall c. Int -&gt; FutureGenDeleg c -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401921"><span id="local-6989586621679401927"><span class="annot"><span class="annottext">FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c/= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
== :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c== :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401895"><span id="local-6989586621679401897"><span id="local-6989586621679401900"><span id="local-6989586621679401903"><span id="local-6989586621679401906"><span id="local-6989586621679401910"><span id="local-6989586621679401916"><span class="annot"><span class="annottext">FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
forall c. Eq (FutureGenDeleg c)
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
min :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
$cmin :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
max :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
$cmax :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; FutureGenDeleg c
&gt;= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&gt;= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&gt; :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&gt; :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&lt;= :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&lt;= :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
&lt; :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
$c&lt; :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Bool
compare :: FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
$ccompare :: forall c. FutureGenDeleg c -&gt; FutureGenDeleg c -&gt; Ordering
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall c x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
forall c x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
$cto :: forall c x. Rep (FutureGenDeleg c) x -&gt; FutureGenDeleg c
$cfrom :: forall c x. FutureGenDeleg c -&gt; Rep (FutureGenDeleg c) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401885"><span id="local-6989586621679401887"><span id="local-6989586621679401889"><span id="local-6989586621679403104"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403104"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401882"><span id="local-6989586621679403102"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403102"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401873"><span id="local-6989586621679401875"><span id="local-6989586621679403096"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403096"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403096"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621679401863"><span class="annot"><span class="annottext">encCBOR :: FutureGenDeleg c -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span id="local-6989586621679401861"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679401861"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679401860"><span class="annot"><span class="annottext">KeyHash 'Genesis c
</span><a href="#local-6989586621679401860"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679401861"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Genesis c
</span><a href="#local-6989586621679401860"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401852"><span id="local-6989586621679401854"><span id="local-6989586621679403087"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403087"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403087"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>  </span><span id="local-6989586621679401837"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (FutureGenDeleg c)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><span class="annottext">forall a s. Text -&gt; (a -&gt; Int) -&gt; Decoder s a -&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decodeRecordNamed</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;FutureGenDeleg&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-98"></span><span>      </span><span class="annot"><span class="annottext">forall c. SlotNo -&gt; KeyHash 'Genesis c -&gt; FutureGenDeleg c
</span><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-var">FutureGenDeleg</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401827"><span id="local-6989586621679401829"><span id="local-6989586621679401831"><span id="local-6989586621679403065"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403065"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403065"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621679401813"><span class="annot"><span class="annottext">toJSON :: FutureGenDeleg c -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span id="local-6989586621679401811"><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679401811"><span class="hs-identifier hs-var">fGenDeleg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-103"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegSlot&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; SlotNo
</span><a href="Cardano.Ledger.CertState.html#fGenDelegSlot"><span class="hs-identifier hs-var">fGenDelegSlot</span></a></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679401811"><span class="hs-identifier hs-var">fGenDeleg</span></a></span><span>
</span><span id="line-104"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegGenKeyHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">forall c. FutureGenDeleg c -&gt; KeyHash 'Genesis c
</span><a href="Cardano.Ledger.CertState.html#fGenDelegGenKeyHash"><span class="hs-identifier hs-var">fGenDelegGenKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">FutureGenDeleg c
</span><a href="#local-6989586621679401811"><span class="hs-identifier hs-var">fGenDeleg</span></a></span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-comment">-- | InstantaneousRewards captures the pending changes to the ledger</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- state caused by MIR certificates. It consists of two mappings,</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- the rewards which will be paid out from the reserves and the rewards</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- which will be paid out from the treasury. It also consists of</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- two coin values which represent the transfer of coins from</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- one pot to the other pot.</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- NOTE that the following property should always hold:</span><span>
</span><span id="line-114"></span><span class="hs-comment">--   deltaReserves + deltaTreasury = 0</span><span>
</span><span id="line-115"></span><span id="local-6989586621679401809"><span id="local-6989586621679401810"></span></span><span class="hs-keyword">data</span><span> </span><span id="InstantaneousRewards"><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span></span><span> </span><span id="local-6989586621679403054"><span class="annot"><a href="#local-6989586621679403054"><span class="hs-identifier hs-type">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InstantaneousRewards"><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="iRReserves"><span class="annot"><span class="annottext">forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
</span><a href="Cardano.Ledger.CertState.html#iRReserves"><span class="hs-identifier hs-var hs-var">iRReserves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403054"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="iRTreasury"><span class="annot"><span class="annottext">forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
</span><a href="Cardano.Ledger.CertState.html#iRTreasury"><span class="hs-identifier hs-var hs-var">iRTreasury</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403054"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="deltaReserves"><span class="annot"><span class="annottext">forall c. InstantaneousRewards c -&gt; DeltaCoin
</span><a href="Cardano.Ledger.CertState.html#deltaReserves"><span class="hs-identifier hs-var hs-var">deltaReserves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier hs-type">DeltaCoin</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="deltaTreasury"><span class="annot"><span class="annottext">forall c. InstantaneousRewards c -&gt; DeltaCoin
</span><a href="Cardano.Ledger.CertState.html#deltaTreasury"><span class="hs-identifier hs-var hs-var">deltaTreasury</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Cardano.Ledger.Coin.html#DeltaCoin"><span class="hs-identifier hs-type">DeltaCoin</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401789"><span id="local-6989586621679401791"><span id="local-6989586621679401802"><span class="annot"><span class="annottext">Int -&gt; InstantaneousRewards c -&gt; ShowS
forall c. Int -&gt; InstantaneousRewards c -&gt; ShowS
forall c. [InstantaneousRewards c] -&gt; ShowS
forall c. InstantaneousRewards c -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [InstantaneousRewards c] -&gt; ShowS
$cshowList :: forall c. [InstantaneousRewards c] -&gt; ShowS
show :: InstantaneousRewards c -&gt; String
$cshow :: forall c. InstantaneousRewards c -&gt; String
showsPrec :: Int -&gt; InstantaneousRewards c -&gt; ShowS
$cshowsPrec :: forall c. Int -&gt; InstantaneousRewards c -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401775"><span id="local-6989586621679401785"><span class="annot"><span class="annottext">InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
$c/= :: forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
== :: InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
$c== :: forall c. InstantaneousRewards c -&gt; InstantaneousRewards c -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall c x.
Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
forall c x.
InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
$cto :: forall c x.
Rep (InstantaneousRewards c) x -&gt; InstantaneousRewards c
$cfrom :: forall c x.
InstantaneousRewards c -&gt; Rep (InstantaneousRewards c) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401765"><span id="local-6989586621679401767"><span id="local-6989586621679401769"><span id="local-6989586621679403043"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403043"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401763"><span id="local-6989586621679403042"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403042"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401757"><span id="local-6989586621679401759"><span id="local-6989586621679403041"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403041"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403041"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679401752"><span class="annot"><span class="annottext">toJSON :: InstantaneousRewards c -&gt; Value
</span><a href="#local-6989586621679401752"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a c. (KeyValue a, Crypto c) =&gt; InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var">toInstantaneousRewardsPair</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679401744"><span class="annot"><span class="annottext">toEncoding :: InstantaneousRewards c -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a c. (KeyValue a, Crypto c) =&gt; InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var">toInstantaneousRewardsPair</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621679403036"><span id="local-6989586621679403037"><span class="annot"><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-type">toInstantaneousRewardsPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679403037"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403036"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403036"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679403037"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-132"></span><span id="toInstantaneousRewardsPair"><span class="annot"><span class="annottext">toInstantaneousRewardsPair :: forall a c. (KeyValue a, Crypto c) =&gt; InstantaneousRewards c -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toInstantaneousRewardsPair"><span class="hs-identifier hs-var hs-var">toInstantaneousRewardsPair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401719"><span id="local-6989586621679401720"><span id="local-6989586621679401721"><span id="local-6989586621679401722"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
DeltaCoin
deltaTreasury :: DeltaCoin
deltaReserves :: DeltaCoin
iRTreasury :: Map (Credential 'Staking c) Coin
iRReserves :: Map (Credential 'Staking c) Coin
deltaTreasury :: forall c. InstantaneousRewards c -&gt; DeltaCoin
deltaReserves :: forall c. InstantaneousRewards c -&gt; DeltaCoin
iRTreasury :: forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
iRReserves :: forall c.
InstantaneousRewards c -&gt; Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401719"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;iRReserves&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401722"><span class="hs-identifier hs-var">iRReserves</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;iRTreasury&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401721"><span class="hs-identifier hs-var">iRTreasury</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deltaReserves&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401720"><span class="hs-identifier hs-var">deltaReserves</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deltaTreasury&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401719"><span class="hs-identifier hs-var">deltaTreasury</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- | The state used by the DELEG rule, which roughly tracks stake</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- delegation and some governance features.</span><span>
</span><span id="line-141"></span><span id="local-6989586621679401717"><span id="local-6989586621679401718"></span></span><span class="hs-keyword">data</span><span> </span><span id="DState"><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span> </span><span id="local-6989586621679403025"><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DState"><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="dsUnified"><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var hs-var">dsUnified</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-comment">-- ^ Unified Reward Maps. This contains the reward map (which is the source</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-comment">-- of truth regarding the registered stake credentials, the deposit map,</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-comment">-- the delegation map, and the stake credential pointer map.</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsFutureGenDelegs"><span class="annot"><span class="annottext">forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#dsFutureGenDelegs"><span class="hs-identifier hs-var hs-var">dsFutureGenDelegs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#GenDelegPair"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-comment">-- ^ Future genesis key delegations</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsGenDelegs"><span class="annot"><span class="annottext">forall era. DState era -&gt; GenDelegs (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsGenDelegs"><span class="hs-identifier hs-var hs-var">dsGenDelegs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#GenDelegs"><span class="hs-identifier hs-type">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-comment">-- ^ Genesis key delegations</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dsIRewards"><span class="annot"><span class="annottext">forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsIRewards"><span class="hs-identifier hs-var hs-var">dsIRewards</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403025"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-comment">-- ^ Instantaneous Rewards</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401697"><span id="local-6989586621679401699"><span id="local-6989586621679401710"><span class="annot"><span class="annottext">Int -&gt; DState era -&gt; ShowS
forall era. Int -&gt; DState era -&gt; ShowS
forall era. [DState era] -&gt; ShowS
forall era. DState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DState era] -&gt; ShowS
$cshowList :: forall era. [DState era] -&gt; ShowS
show :: DState era -&gt; String
$cshow :: forall era. DState era -&gt; String
showsPrec :: Int -&gt; DState era -&gt; ShowS
$cshowsPrec :: forall era. Int -&gt; DState era -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401684"><span id="local-6989586621679401694"><span class="annot"><span class="annottext">DState era -&gt; DState era -&gt; Bool
forall era. DState era -&gt; DState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DState era -&gt; DState era -&gt; Bool
$c/= :: forall era. DState era -&gt; DState era -&gt; Bool
== :: DState era -&gt; DState era -&gt; Bool
$c== :: forall era. DState era -&gt; DState era -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (DState era) x -&gt; DState era
forall era x. DState era -&gt; Rep (DState era) x
$cto :: forall era x. Rep (DState era) x -&gt; DState era
$cfrom :: forall era x. DState era -&gt; Rep (DState era) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401675"><span id="local-6989586621679401677"><span id="local-6989586621679401679"><span id="local-6989586621679403017"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403017"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401673"><span id="local-6989586621679403016"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403016"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401665"><span id="local-6989586621679401667"><span id="local-6989586621679403014"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403014"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403014"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403014"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621679401649"><span class="annot"><span class="annottext">encCBOR :: DState era -&gt; Encoding
</span><a href="#local-6989586621679401649"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span id="local-6989586621679401648"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679401648"><span class="hs-identifier hs-var">unified</span></a></span></span><span> </span><span id="local-6989586621679401647"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679401647"><span class="hs-identifier hs-var">fgs</span></a></span></span><span> </span><span id="local-6989586621679401646"><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679401646"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span id="local-6989586621679401645"><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679401645"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679401648"><span class="hs-identifier hs-var">unified</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679401647"><span class="hs-identifier hs-var">fgs</span></a></span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679401646"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-165"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679401645"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401638"><span id="local-6989586621679401640"><span id="local-6989586621679403001"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-169"></span><span>    </span><span id="Share"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span id="local-6989586621679403001"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-170"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679403001"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621679401600"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s. StateT (Share (DState era)) (Decoder s) (DState era)
</span><a href="#local-6989586621679401600"><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decodeRecordNamedT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621679401599"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679401599"><span class="hs-identifier hs-var">unified</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusCBOR</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span id="local-6989586621679401598"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679401598"><span class="hs-identifier hs-var">fgs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span id="local-6989586621679401596"><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679401596"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span id="local-6989586621679401595"><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679401595"><span class="hs-identifier hs-var">ir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679401599"><span class="hs-identifier hs-var">unified</span></a></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679401598"><span class="hs-identifier hs-var">fgs</span></a></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679401596"><span class="hs-identifier hs-var">gs</span></a></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679401595"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401585"><span id="local-6989586621679401587"><span id="local-6989586621679402967"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402967"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402967"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679401580"><span class="annot"><span class="annottext">toJSON :: DState era -&gt; Value
</span><a href="#local-6989586621679401580"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var">toDStatePair</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span id="local-6989586621679401575"><span class="annot"><span class="annottext">toEncoding :: DState era -&gt; Encoding
</span><a href="#local-6989586621679401575"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var">toDStatePair</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span id="local-6989586621679402965"><span id="local-6989586621679402966"><span class="annot"><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-type">toDStatePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679402966"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402965"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402965"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679402966"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-184"></span><span id="toDStatePair"><span class="annot"><span class="annottext">toDStatePair :: forall a era. (KeyValue a, Era era) =&gt; DState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toDStatePair"><span class="hs-identifier hs-var hs-var">toDStatePair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401548"><span id="local-6989586621679401549"><span id="local-6989586621679401550"><span id="local-6989586621679401551"><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
GenDelegs (EraCrypto era)
UMap (EraCrypto era)
InstantaneousRewards (EraCrypto era)
dsIRewards :: InstantaneousRewards (EraCrypto era)
dsGenDelegs :: GenDelegs (EraCrypto era)
dsFutureGenDelegs :: Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
dsUnified :: UMap (EraCrypto era)
dsIRewards :: forall era. DState era -&gt; InstantaneousRewards (EraCrypto era)
dsGenDelegs :: forall era. DState era -&gt; GenDelegs (EraCrypto era)
dsFutureGenDelegs :: forall era.
DState era
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="#local-6989586621679401548"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;unified&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679401551"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;fGenDelegs&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621679401550"><span class="hs-identifier hs-var">dsFutureGenDelegs</span></a></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;genDelegs&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">GenDelegs (EraCrypto era)
</span><a href="#local-6989586621679401549"><span class="hs-identifier hs-var">dsGenDelegs</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;irwd&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">InstantaneousRewards (EraCrypto era)
</span><a href="#local-6989586621679401548"><span class="hs-identifier hs-var">dsIRewards</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- | Function that looks up the deposit for currently delegated staking credential</span><span>
</span><span id="line-192"></span><span id="local-6989586621679402954"><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier hs-type">lookupDepositDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402954"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier hs-type">StakeCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-193"></span><span id="lookupDepositDState"><span class="annot"><span class="annottext">lookupDepositDState :: forall era.
DState era -&gt; StakeCredential (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupDepositDState"><span class="hs-identifier hs-var hs-var">lookupDepositDState</span></a></span></span><span> </span><span id="local-6989586621679401542"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401542"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679401541"><span class="annot"><span class="annottext">currentRewardDeposits :: UView (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="#local-6989586621679401541"><span class="hs-identifier hs-var hs-var">currentRewardDeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401542"><span class="hs-identifier hs-var">dstate</span></a></span><span>
</span><span id="line-195"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679401540"><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679401540"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679401538"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679401538"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="Cardano.Ledger.UMap.html#lookup"><span class="hs-identifier hs-var">UM.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679401540"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">UView (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="#local-6989586621679401541"><span class="hs-identifier hs-var">currentRewardDeposits</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679401538"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- | Function that looks up curret reward for the delegated staking credential.</span><span>
</span><span id="line-200"></span><span id="local-6989586621679401535"><span class="annot"><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier hs-type">lookupRewardDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679401535"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#StakeCredential"><span class="hs-identifier hs-type">StakeCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679401535"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-201"></span><span id="lookupRewardDState"><span class="annot"><span class="annottext">lookupRewardDState :: forall era.
DState era -&gt; StakeCredential (EraCrypto era) -&gt; Maybe Coin
</span><a href="Cardano.Ledger.CertState.html#lookupRewardDState"><span class="hs-identifier hs-var hs-var">lookupRewardDState</span></a></span></span><span> </span><span id="local-6989586621679401532"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401532"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679401531"><span class="annot"><span class="annottext">currentRewardDeposits :: UView (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="#local-6989586621679401531"><span class="hs-identifier hs-var hs-var">currentRewardDeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401532"><span class="hs-identifier hs-var">dstate</span></a></span><span>
</span><span id="line-203"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679401530"><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679401530"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span><span> </span><span id="local-6989586621679401529"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679401529"><span class="hs-identifier hs-var">reward</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="Cardano.Ledger.UMap.html#lookup"><span class="hs-identifier hs-var">UM.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679401530"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">UView (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="#local-6989586621679401531"><span class="hs-identifier hs-var">currentRewardDeposits</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679401529"><span class="hs-identifier hs-var">reward</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- | The state used by the POOL rule, which tracks stake pool information.</span><span>
</span><span id="line-208"></span><span id="local-6989586621679401527"><span id="local-6989586621679401528"></span></span><span class="hs-keyword">data</span><span> </span><span id="PState"><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span></span><span> </span><span id="local-6989586621679402939"><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PState"><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="psStakePoolParams"><span class="annot"><span class="annottext">forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psStakePoolParams"><span class="hs-identifier hs-var hs-var">psStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-comment">-- ^ The stake pool parameters.</span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psFutureStakePoolParams"><span class="annot"><span class="annottext">forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#psFutureStakePoolParams"><span class="hs-identifier hs-var hs-var">psFutureStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.PoolParams.html#PoolParams"><span class="hs-identifier hs-type">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-comment">-- ^ The future stake pool parameters.</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-comment">-- Changes to existing stake pool parameters are staged in order</span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-comment">-- to give delegators time to react to changes.</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-comment">-- See section 11.2, &quot;Example Illustration of the Reward Cycle&quot;,</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-comment">-- of the Shelley Ledger Specification for a sequence diagram.</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psRetiring"><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="Cardano.Ledger.CertState.html#psRetiring"><span class="hs-identifier hs-var hs-var">psRetiring</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-comment">-- ^ A map of retiring stake pools to the epoch when they retire.</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDeposits"><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var hs-var">psDeposits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402939"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- ^ A map of the deposits for each pool</span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401507"><span id="local-6989586621679401509"><span id="local-6989586621679401520"><span class="annot"><span class="annottext">Int -&gt; PState era -&gt; ShowS
forall era. Int -&gt; PState era -&gt; ShowS
forall era. [PState era] -&gt; ShowS
forall era. PState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PState era] -&gt; ShowS
$cshowList :: forall era. [PState era] -&gt; ShowS
show :: PState era -&gt; String
$cshow :: forall era. PState era -&gt; String
showsPrec :: Int -&gt; PState era -&gt; ShowS
$cshowsPrec :: forall era. Int -&gt; PState era -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401493"><span id="local-6989586621679401503"><span class="annot"><span class="annottext">PState era -&gt; PState era -&gt; Bool
forall era. PState era -&gt; PState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PState era -&gt; PState era -&gt; Bool
$c/= :: forall era. PState era -&gt; PState era -&gt; Bool
== :: PState era -&gt; PState era -&gt; Bool
$c== :: forall era. PState era -&gt; PState era -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (PState era) x -&gt; PState era
forall era x. PState era -&gt; Rep (PState era) x
$cto :: forall era x. Rep (PState era) x -&gt; PState era
$cfrom :: forall era x. PState era -&gt; Rep (PState era) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401483"><span id="local-6989586621679401485"><span id="local-6989586621679401487"><span id="local-6989586621679402933"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402933"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401481"><span id="local-6989586621679402932"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402932"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401473"><span id="local-6989586621679401475"><span id="local-6989586621679402931"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402931"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402931"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621679401455"><span class="annot"><span class="annottext">encCBOR :: PState era -&gt; Encoding
</span><a href="#local-6989586621679401455"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span id="local-6989586621679401454"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401454"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679401453"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401453"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621679401452"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679401452"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679401451"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679401451"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401454"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401453"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679401452"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679401451"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401444"><span id="local-6989586621679401446"><span id="local-6989586621679402930"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402930"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402930"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span id="local-6989586621679402930"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402930"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402930"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621679401415"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s. StateT (Share (PState era)) (Decoder s) (PState era)
</span><a href="#local-6989586621679401415"><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decodeRecordNamedT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621679401414"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401414"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679401403"><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401403"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621679401393"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679401393"><span class="hs-identifier hs-var">psRetiring</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621679401383"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679401383"><span class="hs-identifier hs-var">psDeposits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401414"><span class="hs-identifier hs-var hs-var">psStakePoolParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401403"><span class="hs-identifier hs-var hs-var">psFutureStakePoolParams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679401393"><span class="hs-identifier hs-var hs-var">psRetiring</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679401383"><span class="hs-identifier hs-var hs-var">psDeposits</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401366"><span id="local-6989586621679401368"><span id="local-6989586621679402910"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402910"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402910"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402910"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621679401364"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (PState era)
</span><a href="#local-6989586621679401364"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a s. DecShareCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decNoShareCBOR</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401358"><span id="local-6989586621679401360"><span id="local-6989586621679402907"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402907"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402907"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span id="local-6989586621679401353"><span class="annot"><span class="annottext">toJSON :: PState era -&gt; Value
</span><a href="#local-6989586621679401353"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var">toPStatePair</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621679401348"><span class="annot"><span class="annottext">toEncoding :: PState era -&gt; Encoding
</span><a href="#local-6989586621679401348"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var">toPStatePair</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span id="local-6989586621679402905"><span id="local-6989586621679402906"><span class="annot"><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-type">toPStatePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679402906"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402905"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402905"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679402906"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-249"></span><span id="toPStatePair"><span class="annot"><span class="annottext">toPStatePair :: forall a era. (KeyValue a, Era era) =&gt; PState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toPStatePair"><span class="hs-identifier hs-var hs-var">toPStatePair</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401322"><span id="local-6989586621679401323"><span id="local-6989586621679401324"><span id="local-6989586621679401325"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
Map (KeyHash 'StakePool (EraCrypto era)) Coin
Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
psRetiring :: Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psFutureStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psDeposits :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
psRetiring :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
psFutureStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
psStakePoolParams :: forall era.
PState era
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401322"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;stakePoolParams&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401325"><span class="hs-identifier hs-var">psStakePoolParams</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;futureStakePoolParams&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
</span><a href="#local-6989586621679401324"><span class="hs-identifier hs-var">psFutureStakePoolParams</span></a></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;retiring&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
</span><a href="#local-6989586621679401323"><span class="hs-identifier hs-var">psRetiring</span></a></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;deposits&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679401322"><span class="hs-identifier hs-var">psDeposits</span></a></span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span id="local-6989586621679401320"><span id="local-6989586621679401321"></span></span><span class="hs-keyword">data</span><span> </span><span id="VState"><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span></span><span> </span><span id="local-6989586621679402898"><span class="annot"><a href="#local-6989586621679402898"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="VState"><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="vsDReps"><span class="annot"><span class="annottext">forall era. VState era -&gt; Set (Credential 'Voting (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#vsDReps"><span class="hs-identifier hs-var hs-var">vsDReps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Voting"><span class="hs-identifier hs-type">Voting</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="vsCommitteeHotKeys"><span class="annot"><span class="annottext">forall era.
VState era
-&gt; Map
     (KeyHash 'CommitteeColdKey (EraCrypto era))
     (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
</span><a href="Cardano.Ledger.CertState.html#vsCommitteeHotKeys"><span class="hs-identifier hs-var hs-var">vsCommitteeHotKeys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-259"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span>
</span><span id="line-260"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#CommitteeColdKey"><span class="hs-identifier hs-type">CommitteeColdKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#CommitteeHotKey"><span class="hs-identifier hs-type">CommitteeHotKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402898"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- `Nothing` to indicate &quot;resigned&quot;.</span><span>
</span><span id="line-262"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401304"><span id="local-6989586621679401306"><span id="local-6989586621679401315"><span class="annot"><span class="annottext">Int -&gt; VState era -&gt; ShowS
forall era. Int -&gt; VState era -&gt; ShowS
forall era. [VState era] -&gt; ShowS
forall era. VState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [VState era] -&gt; ShowS
$cshowList :: forall era. [VState era] -&gt; ShowS
show :: VState era -&gt; String
$cshow :: forall era. VState era -&gt; String
showsPrec :: Int -&gt; VState era -&gt; ShowS
$cshowsPrec :: forall era. Int -&gt; VState era -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401292"><span id="local-6989586621679401300"><span class="annot"><span class="annottext">VState era -&gt; VState era -&gt; Bool
forall era. VState era -&gt; VState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: VState era -&gt; VState era -&gt; Bool
$c/= :: forall era. VState era -&gt; VState era -&gt; Bool
== :: VState era -&gt; VState era -&gt; Bool
$c== :: forall era. VState era -&gt; VState era -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (VState era) x -&gt; VState era
forall era x. VState era -&gt; Rep (VState era) x
$cto :: forall era x. Rep (VState era) x -&gt; VState era
$cfrom :: forall era x. VState era -&gt; Rep (VState era) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679402888"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402888"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621679401280"><span class="annot"><span class="annottext">def :: VState era
</span><a href="#local-6989586621679401280"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
Set (Credential 'Voting (EraCrypto era))
-&gt; Map
     (KeyHash 'CommitteeColdKey (EraCrypto era))
     (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
-&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401274"><span id="local-6989586621679401276"><span id="local-6989586621679401278"><span id="local-6989586621679402884"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402884"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401272"><span id="local-6989586621679402883"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402883"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401264"><span id="local-6989586621679401266"><span id="local-6989586621679402882"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402882"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402882"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-274"></span><span>  </span><span id="local-6989586621679401248"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (VState era)
</span><a href="#local-6989586621679401248"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-276"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Set (Credential 'Voting (EraCrypto era))
-&gt; Map
     (KeyHash 'CommitteeColdKey (EraCrypto era))
     (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
-&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401238"><span id="local-6989586621679401240"><span id="local-6989586621679402862"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402862"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402862"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679401223"><span class="annot"><span class="annottext">encCBOR :: VState era -&gt; Encoding
</span><a href="#local-6989586621679401223"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401221"><span id="local-6989586621679401222"><span class="annot"><span class="annottext">Set (Credential 'Voting (EraCrypto era))
Map
  (KeyHash 'CommitteeColdKey (EraCrypto era))
  (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
vsCommitteeHotKeys :: Map
  (KeyHash 'CommitteeColdKey (EraCrypto era))
  (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
vsDReps :: Set (Credential 'Voting (EraCrypto era))
vsCommitteeHotKeys :: forall era.
VState era
-&gt; Map
     (KeyHash 'CommitteeColdKey (EraCrypto era))
     (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
vsDReps :: forall era. VState era -&gt; Set (Credential 'Voting (EraCrypto era))
</span><a href="#local-6989586621679401221"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-283"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Set (Credential 'Voting (EraCrypto era))
-&gt; Map
     (KeyHash 'CommitteeColdKey (EraCrypto era))
     (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
-&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-var">VState</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679402862"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>        </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'Voting (EraCrypto era))
</span><a href="#local-6989586621679401222"><span class="hs-identifier hs-var">vsDReps</span></a></span><span>
</span><span id="line-285"></span><span>        </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'CommitteeColdKey (EraCrypto era))
  (Maybe (KeyHash 'CommitteeHotKey (EraCrypto era)))
</span><a href="#local-6989586621679401221"><span class="hs-identifier hs-var">vsCommitteeHotKeys</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">-- | The state associated with the DELPL rule, which combines the DELEG rule</span><span>
</span><span id="line-288"></span><span class="hs-comment">-- and the POOL rule.</span><span>
</span><span id="line-289"></span><span id="local-6989586621679401217"><span id="local-6989586621679401218"></span></span><span class="hs-keyword">data</span><span> </span><span id="CertState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span></span><span> </span><span id="local-6989586621679402848"><span class="annot"><a href="#local-6989586621679402848"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CertState"><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="certVState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; VState era
</span><a href="Cardano.Ledger.CertState.html#certVState"><span class="hs-identifier hs-var hs-var">certVState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="certPState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#certPState"><span class="hs-identifier hs-var hs-var">certPState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="certDState"><span class="annot"><span class="annottext">forall era. CertState era -&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#certDState"><span class="hs-identifier hs-var hs-var">certDState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402848"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679401203"><span id="local-6989586621679401205"><span id="local-6989586621679401211"><span class="annot"><span class="annottext">Int -&gt; CertState era -&gt; ShowS
forall era. Int -&gt; CertState era -&gt; ShowS
forall era. [CertState era] -&gt; ShowS
forall era. CertState era -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [CertState era] -&gt; ShowS
$cshowList :: forall era. [CertState era] -&gt; ShowS
show :: CertState era -&gt; String
$cshow :: forall era. CertState era -&gt; String
showsPrec :: Int -&gt; CertState era -&gt; ShowS
$cshowsPrec :: forall era. Int -&gt; CertState era -&gt; ShowS
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401196"><span id="local-6989586621679401201"><span class="annot"><span class="annottext">CertState era -&gt; CertState era -&gt; Bool
forall era. CertState era -&gt; CertState era -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: CertState era -&gt; CertState era -&gt; Bool
$c/= :: forall era. CertState era -&gt; CertState era -&gt; Bool
== :: CertState era -&gt; CertState era -&gt; Bool
$c== :: forall era. CertState era -&gt; CertState era -&gt; Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (CertState era) x -&gt; CertState era
forall era x. CertState era -&gt; Rep (CertState era) x
$cto :: forall era x. Rep (CertState era) x -&gt; CertState era
$cfrom :: forall era x. CertState era -&gt; Rep (CertState era) x
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401188"><span id="local-6989586621679401190"><span id="local-6989586621679401192"><span id="local-6989586621679402844"><span class="annot"><span class="hs-identifier hs-type">NoThunks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402844"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401186"><span id="local-6989586621679402843"><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402843"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401178"><span id="local-6989586621679401180"><span id="local-6989586621679402842"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402842"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402842"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621679401164"><span class="annot"><span class="annottext">encCBOR :: InstantaneousRewards c -&gt; Encoding
</span><a href="#local-6989586621679401164"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span id="local-6989586621679401163"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401163"><span class="hs-identifier hs-var">irR</span></a></span></span><span> </span><span id="local-6989586621679401162"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401162"><span class="hs-identifier hs-var">irT</span></a></span></span><span> </span><span id="local-6989586621679401161"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401161"><span class="hs-identifier hs-var">dR</span></a></span></span><span> </span><span id="local-6989586621679401160"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401160"><span class="hs-identifier hs-var">dT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401163"><span class="hs-identifier hs-var">irR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401162"><span class="hs-identifier hs-var">irT</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401161"><span class="hs-identifier hs-var">dR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401160"><span class="hs-identifier hs-var">dT</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401153"><span id="local-6989586621679401155"><span id="local-6989586621679402841"><span class="annot"><a href="Cardano.Ledger.Crypto.html#Crypto"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402841"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402841"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span id="local-6989586621679402841"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402841"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402841"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>  </span><span id="local-6989586621679401125"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s.
StateT
  (Share (InstantaneousRewards c))
  (Decoder s)
  (InstantaneousRewards c)
</span><a href="#local-6989586621679401125"><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decodeRecordNamedT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;InstantaneousRewards&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>      </span><span id="local-6989586621679401124"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401124"><span class="hs-identifier hs-var">irR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>      </span><span id="local-6989586621679401114"><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401114"><span class="hs-identifier hs-var">irT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. Monoid a =&gt; Lens' a b -&gt; Lens' c b -&gt; Lens' c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">toMemptyLens</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_1</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>      </span><span id="local-6989586621679401104"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401104"><span class="hs-identifier hs-var">dR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span>
</span><span id="line-311"></span><span>      </span><span id="local-6989586621679401103"><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401103"><span class="hs-identifier hs-var">dT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span>
</span><span id="line-312"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall c.
Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
</span><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401124"><span class="hs-identifier hs-var">irR</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) Coin
</span><a href="#local-6989586621679401114"><span class="hs-identifier hs-var">irT</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401104"><span class="hs-identifier hs-var">dR</span></a></span><span> </span><span class="annot"><span class="annottext">DeltaCoin
</span><a href="#local-6989586621679401103"><span class="hs-identifier hs-var">dT</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401095"><span id="local-6989586621679401097"><span id="local-6989586621679402833"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402833"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402833"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679401087"><span class="annot"><span class="annottext">encCBOR :: CertState era -&gt; Encoding
</span><a href="#local-6989586621679401087"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401086"><span class="annot"><span class="annottext">PState era
certPState :: PState era
certPState :: forall era. CertState era -&gt; PState era
</span><a href="#local-6989586621679401086"><span class="hs-identifier hs-var hs-var">certPState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401085"><span class="annot"><span class="annottext">DState era
certDState :: DState era
certDState :: forall era. CertState era -&gt; DState era
</span><a href="#local-6989586621679401085"><span class="hs-identifier hs-var hs-var">certDState</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679401084"><span class="annot"><span class="annottext">VState era
certVState :: VState era
certVState :: forall era. CertState era -&gt; VState era
</span><a href="#local-6989586621679401084"><span class="hs-identifier hs-var hs-var">certVState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="annottext">Word -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encodeListLen</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">3</span></span><span>
</span><span id="line-317"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679401084"><span class="hs-identifier hs-var">certVState</span></a></span><span>
</span><span id="line-318"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679401086"><span class="hs-identifier hs-var">certPState</span></a></span><span>
</span><span id="line-319"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; a -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401085"><span class="hs-identifier hs-var">certDState</span></a></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401077"><span id="local-6989586621679401079"><span id="local-6989586621679402832"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402832"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402832"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Share"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span id="local-6989586621679402832"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402832"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402832"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402832"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621679401055"><span class="annot"><span class="annottext">decSharePlusCBOR :: forall s.
StateT (Share (CertState era)) (Decoder s) (CertState era)
</span><a href="#local-6989586621679401055"><span class="hs-identifier hs-var hs-var hs-var hs-var">decSharePlusCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: (* -&gt; *) -&gt; * -&gt; *) s a.
(MonadTrans m, Monad (m (Decoder s))) =&gt;
Text -&gt; (a -&gt; Int) -&gt; m (Decoder s) a -&gt; m (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decodeRecordNamedT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;CertState&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679401054"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621679401054"><span class="hs-identifier hs-var">certVState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decCBOR</span></a></span><span> </span><span class="hs-comment">-- TODO: add sharing of DRep credentials</span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679401053"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679401053"><span class="hs-identifier hs-var">certPState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall b bs s.
DecShareCBOR b =&gt;
Lens' bs (Share b) -&gt; StateT bs (Decoder s) b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusLensCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field2 s t a b =&gt; Lens s t a b
</span><span class="hs-identifier hs-var">_2</span></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679401048"><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401048"><span class="hs-identifier hs-var">certDState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a s. DecShareCBOR a =&gt; StateT (Share a) (Decoder s) a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.1.1.2/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decSharePlusCBOR</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">PState era
certPState :: PState era
certPState :: PState era
</span><a href="#local-6989586621679401053"><span class="hs-identifier hs-var hs-var">certPState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DState era
certDState :: DState era
certDState :: DState era
</span><a href="#local-6989586621679401048"><span class="hs-identifier hs-var hs-var">certDState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VState era
certVState :: VState era
certVState :: VState era
</span><a href="#local-6989586621679401054"><span class="hs-identifier hs-var hs-var">certVState</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679402820"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402820"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>  </span><span id="local-6989586621679401040"><span class="annot"><span class="annottext">def :: CertState era
</span><a href="#local-6989586621679401040"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. VState era -&gt; PState era -&gt; DState era -&gt; CertState era
</span><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-var">CertState</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679401034"><span id="local-6989586621679401036"><span id="local-6989586621679402817"><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402817"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402817"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621679401029"><span class="annot"><span class="annottext">toJSON :: CertState era -&gt; Value
</span><a href="#local-6989586621679401029"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var">toCertStatePairs</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span id="local-6989586621679401024"><span class="annot"><span class="annottext">toEncoding :: CertState era -&gt; Encoding
</span><a href="#local-6989586621679401024"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><span class="hs-identifier hs-var">pairs</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a era. (KeyValue a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var">toCertStatePairs</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span id="local-6989586621679402815"><span id="local-6989586621679402816"><span class="annot"><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-type">toCertStatePairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">KeyValue</span></span><span> </span><span class="annot"><a href="#local-6989586621679402816"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402815"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402815"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679402816"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-337"></span><span id="toCertStatePairs"><span class="annot"><span class="annottext">toCertStatePairs :: forall a era. (KeyValue a, Era era) =&gt; CertState era -&gt; [a]
</span><a href="Cardano.Ledger.CertState.html#toCertStatePairs"><span class="hs-identifier hs-var hs-var">toCertStatePairs</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679401013"><span id="local-6989586621679401014"><span id="local-6989586621679401015"><span class="annot"><span class="annottext">VState era
PState era
DState era
certDState :: DState era
certPState :: PState era
certVState :: VState era
certDState :: forall era. CertState era -&gt; DState era
certPState :: forall era. CertState era -&gt; PState era
certVState :: forall era. CertState era -&gt; VState era
</span><a href="#local-6989586621679401013"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;dstate&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">DState era
</span><a href="#local-6989586621679401013"><span class="hs-identifier hs-var">certDState</span></a></span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;pstate&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679401014"><span class="hs-identifier hs-var">certPState</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679402811"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402811"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-343"></span><span>  </span><span id="local-6989586621679401007"><span class="annot"><span class="annottext">def :: InstantaneousRewards c
</span><a href="#local-6989586621679401007"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c.
Map (Credential 'Staking c) Coin
-&gt; Map (Credential 'Staking c) Coin
-&gt; DeltaCoin
-&gt; DeltaCoin
-&gt; InstantaneousRewards c
</span><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-var">InstantaneousRewards</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679402819"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402819"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621679401003"><span class="annot"><span class="annottext">def :: DState era
</span><a href="#local-6989586621679401003"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">forall era.
UMap (EraCrypto era)
-&gt; Map
     (FutureGenDeleg (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; GenDelegs (EraCrypto era)
-&gt; InstantaneousRewards (EraCrypto era)
-&gt; DState era
</span><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">forall c. UMap c
</span><a href="Cardano.Ledger.UMap.html#empty"><span class="hs-identifier hs-var">UM.empty</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. Map (KeyHash 'Genesis c) (GenDelegPair c) -&gt; GenDelegs c
</span><a href="Cardano.Ledger.Keys.html#GenDelegs"><span class="hs-identifier hs-var">GenDelegs</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-351"></span><span>      </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679402818"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402818"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>  </span><span id="local-6989586621679400999"><span class="annot"><span class="annottext">def :: PState c
</span><a href="#local-6989586621679400999"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="annottext">forall era.
Map
  (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era))
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) EpochNo
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
-&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-var">PState</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span id="local-6989586621679402805"><span class="annot"><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier hs-type">rewards</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402805"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier hs-type">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402805"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402805"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#RDPair"><span class="hs-identifier hs-type">RDPair</span></a></span></span><span>
</span><span id="line-358"></span><span id="rewards"><span class="annot"><span class="annottext">rewards :: forall era.
DState era
-&gt; UView
     (EraCrypto era) (Credential 'Staking (EraCrypto era)) RDPair
</span><a href="Cardano.Ledger.CertState.html#rewards"><span class="hs-identifier hs-var hs-var">rewards</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span id="local-6989586621679402803"><span class="annot"><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier hs-type">delegations</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-361"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402803"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-362"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UView"><span class="hs-identifier hs-type">UView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402803"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-363"></span><span id="delegations"><span class="annot"><span class="annottext">delegations :: forall era.
DState era
-&gt; UView
     (EraCrypto era)
     (Credential 'Staking (EraCrypto era))
     (KeyHash 'StakePool (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#delegations"><span class="hs-identifier hs-var hs-var">delegations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c.
UMap c -&gt; UView c (Credential 'Staking c) (KeyHash 'StakePool c)
</span><a href="Cardano.Ledger.UMap.html#SPoolUView"><span class="hs-identifier hs-var">SPoolUView</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">-- | get the actual ptrs map, we don't need a view</span><span>
</span><span id="line-366"></span><span id="local-6989586621679402800"><span class="annot"><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier hs-type">ptrsMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402800"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Credential.html#Ptr"><span class="hs-identifier hs-type">Ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402800"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-367"></span><span id="ptrsMap"><span class="annot"><span class="annottext">ptrsMap :: forall era.
DState era -&gt; Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="Cardano.Ledger.CertState.html#ptrsMap"><span class="hs-identifier hs-var hs-var">ptrsMap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Ledger.UMap.html#UMap"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (UMElem (EraCrypto era))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679400998"><span class="annot"><span class="annottext">Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="#local-6989586621679400998"><span class="hs-identifier hs-var">ptrmap</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Ptr (Credential 'Staking (EraCrypto era))
</span><a href="#local-6989586621679400998"><span class="hs-identifier hs-var">ptrmap</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-comment">-- ==========================================================</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- Functions that handle Deposits for pool key hashes.</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- | One only pays a deposit on the initial pool registration. So return the</span><span>
</span><span id="line-373"></span><span class="hs-comment">--   the Deposits unchanged if the keyhash already exists. There are legal</span><span>
</span><span id="line-374"></span><span class="hs-comment">--   situations where a pool may be registered multiple times.</span><span>
</span><span id="line-375"></span><span id="local-6989586621679402796"><span class="annot"><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier hs-type">payPoolDeposit</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-376"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402796"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-378"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402796"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-379"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402796"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-380"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402796"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-381"></span><span id="payPoolDeposit"><span class="annot"><span class="annottext">payPoolDeposit :: forall era.
EraPParams era =&gt;
KeyHash 'StakePool (EraCrypto era)
-&gt; PParams era -&gt; PState era -&gt; PState era
</span><a href="Cardano.Ledger.CertState.html#payPoolDeposit"><span class="hs-identifier hs-var hs-var">payPoolDeposit</span></a></span></span><span> </span><span id="local-6989586621679400991"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400991"><span class="hs-identifier hs-var">keyhash</span></a></span></span><span> </span><span id="local-6989586621679400990"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679400990"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span id="local-6989586621679400989"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400989"><span class="hs-identifier hs-var">pstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400989"><span class="hs-identifier hs-var">pstate</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400988"><span class="hs-identifier hs-var">newpool</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621679400987"><span class="annot"><span class="annottext">pool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400987"><span class="hs-identifier hs-var hs-var">pool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400989"><span class="hs-identifier hs-var">pstate</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621679400988"><span class="annot"><span class="annottext">newpool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400988"><span class="hs-identifier hs-var hs-var">newpool</span></a></span></span><span>
</span><span id="line-385"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.notMember</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400991"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400987"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400991"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679400990"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; Lens' (PParams era) Coin
</span><a href="Cardano.Ledger.Core.PParams.html#ppPoolDepositL"><span class="hs-identifier hs-var">ppPoolDepositL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400987"><span class="hs-identifier hs-var">pool</span></a></span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400987"><span class="hs-identifier hs-var">pool</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span id="local-6989586621679402782"><span class="annot"><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier hs-type">refundPoolDeposit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Keys.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Cardano.Ledger.Keys.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Core.Era.html#EraCrypto"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402782"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402782"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-389"></span><span id="refundPoolDeposit"><span class="annot"><span class="annottext">refundPoolDeposit :: forall era.
KeyHash 'StakePool (EraCrypto era)
-&gt; PState era -&gt; (Coin, PState era)
</span><a href="Cardano.Ledger.CertState.html#refundPoolDeposit"><span class="hs-identifier hs-var hs-var">refundPoolDeposit</span></a></span></span><span> </span><span id="local-6989586621679400980"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400980"><span class="hs-identifier hs-var">keyhash</span></a></span></span><span> </span><span id="local-6989586621679400979"><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400979"><span class="hs-identifier hs-var">pstate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679400978"><span class="hs-identifier hs-var">coin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400979"><span class="hs-identifier hs-var">pstate</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psDeposits :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400977"><span class="hs-identifier hs-var">newpool</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-391"></span><span>    </span><span id="local-6989586621679400976"><span class="annot"><span class="annottext">pool :: Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400976"><span class="hs-identifier hs-var hs-var">pool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PState era
</span><a href="#local-6989586621679400979"><span class="hs-identifier hs-var">pstate</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679400978"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679400978"><span class="hs-identifier hs-var">coin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679400977"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400977"><span class="hs-identifier hs-var">newpool</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400980"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400976"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-393"></span><span>      </span><span class="annot"><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679400974"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679400974"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679400974"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.delete</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679400980"><span class="hs-identifier hs-var">keyhash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400976"><span class="hs-identifier hs-var">pool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>      </span><span class="annot"><span class="annottext">Maybe Coin
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400976"><span class="hs-identifier hs-var">pool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span class="hs-comment">-- | Calculate total possible refunds in the system. There is an invariant that</span><span>
</span><span id="line-397"></span><span class="hs-comment">--   this should be the same as the utxosDeposited field of the UTxOState. Note that</span><span>
</span><span id="line-398"></span><span class="hs-comment">--   this does not depend upon the current values of the Key and Pool deposits of the PParams.</span><span>
</span><span id="line-399"></span><span id="local-6989586621679402776"><span class="annot"><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier hs-type">obligationCertState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402776"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-400"></span><span id="obligationCertState"><span class="annot"><span class="annottext">obligationCertState :: forall era. CertState era -&gt; Coin
</span><a href="Cardano.Ledger.CertState.html#obligationCertState"><span class="hs-identifier hs-var hs-var">obligationCertState</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psDeposits :: forall era.
PState era -&gt; Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="Cardano.Ledger.CertState.html#psDeposits"><span class="hs-identifier hs-var">psDeposits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679400966"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400966"><span class="hs-identifier hs-var">stakePools</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dsUnified :: forall era. DState era -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.CertState.html#dsUnified"><span class="hs-identifier hs-var">dsUnified</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679400965"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679400965"><span class="hs-identifier hs-var">umap</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-401"></span><span>  </span><span class="annot"><span class="annottext">forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">UM.fromCompact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c k. UView c k RDPair -&gt; CompactForm Coin
</span><a href="Cardano.Ledger.UMap.html#sumDepositUView"><span class="hs-identifier hs-var">UM.sumDepositUView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="Cardano.Ledger.UMap.html#RewDepUView"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679400965"><span class="hs-identifier hs-var">umap</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/q054vsi5sfzqlmqglzmmfpa98y36ixhz-ghc-9.2.8-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) Coin
</span><a href="#local-6989586621679400966"><span class="hs-identifier hs-var">stakePools</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-comment">-- =====================================================</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400959"><span id="local-6989586621679400961"><span id="local-6989586621679402766"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402766"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400954"><span id="local-6989586621679400956"><span id="local-6989586621679402765"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#PState"><span class="hs-identifier hs-type">PState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402765"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400950"><span id="local-6989586621679400952"><span id="local-6989586621679402764"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402764"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400946"><span id="local-6989586621679400948"><span id="local-6989586621679402763"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#VState"><span class="hs-identifier hs-type">VState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402763"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400942"><span id="local-6989586621679400944"><span id="local-6989586621679402762"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#FutureGenDeleg"><span class="hs-identifier hs-type">FutureGenDeleg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402762"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679400938"><span id="local-6989586621679400940"><span id="local-6989586621679402761"><span class="annot"><span class="hs-identifier hs-type">ToExpr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.CertState.html#InstantaneousRewards"><span class="hs-identifier hs-type">InstantaneousRewards</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679402761"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-416"></span></pre></body></html>